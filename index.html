<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hoorian Cosmetics & Jewelry - POS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <style>
    :root {
      --bg-dark: #111111;
      --bg-card: #1b1b1b;
      --accent-pink: #ff4f9a;
      --accent-pink-soft: #ff9ac5;
      --text-main: #ffffff;
      --text-muted: #bbbbbb;
      --danger: #ff4f4f;
      --success: #4caf50;
      --border-color: #333333;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--bg-dark);
      color: var(--text-main);
    }
    header {
      background: linear-gradient(90deg, #000000, #2b0b1a);
      padding: 15px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--border-color);
    }
    .logo { display: flex; align-items: center; gap: 10px; }
    .logo-circle {
      width: 40px; height: 40px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffffff, #ff4f9a, #000000);
      display: flex; align-items: center; justify-content: center;
      font-weight: bold; color: #000; font-size: 18px;
    }
    .logo-text { display: flex; flex-direction: column; }
    .logo-text-main { font-size: 18px; font-weight: bold; letter-spacing: 0.5px; }
    .logo-text-sub { font-size: 11px; color: var(--accent-pink-soft); text-transform: uppercase; letter-spacing: 1px; }
    .header-right { font-size: 12px; color: var(--text-muted); text-align: right; }
    .header-right span { display: block; }
    .lang-toggle { margin-top: 4px; }
    .lang-toggle button {
      padding: 3px 8px; border-radius: 999px;
      border: 1px solid var(--accent-pink-soft);
      background: transparent; color: var(--accent-pink-soft);
      font-size: 11px; cursor: pointer;
    }
    .lang-toggle button.active {
      background: var(--accent-pink-soft);
      color: #000;
    }
    .container { display: flex; min-height: calc(100vh - 60px); }
    .sidebar {
      width: 230px; background: #000000;
      border-right: 1px solid var(--border-color);
      padding: 10px;
    }
    .sidebar h3 {
      margin-top: 0; font-size: 14px;
      text-transform: uppercase; color: var(--accent-pink-soft);
      letter-spacing: 1px;
    }
    .nav-btn {
      width: 100%; padding: 10px; margin-bottom: 6px;
      border-radius: 4px; border: 1px solid var(--border-color);
      background: #111111; color: var(--text-main);
      text-align: left; cursor: pointer; font-size: 13px;
      display: flex; justify-content: space-between; align-items: center;
    }
    .nav-btn.active {
      background: var(--accent-pink);
      border-color: var(--accent-pink);
      color: #000; font-weight: bold;
    }
    .nav-btn span.badge {
      background: #222; padding: 2px 6px;
      border-radius: 10px; font-size: 11px;
      color: var(--accent-pink-soft);
    }
    .main { flex: 1; padding: 15px; overflow-y: auto; }
    .card {
      background: var(--bg-card);
      border-radius: 6px;
      padding: 12px 14px;
      margin-bottom: 12px;
      border: 1px solid var(--border-color);
    }
    .card h2 { margin: 0 0 10px 0; font-size: 16px; color: var(--accent-pink-soft); }
    .card h3 { margin: 0 0 8px 0; font-size: 14px; color: var(--accent-pink-soft); }
    label {
      display: block; margin-top: 6px;
      font-size: 12px; color: var(--text-muted);
    }
    input, select, textarea {
      width: 100%; padding: 7px; margin-top: 3px;
      border-radius: 4px; border: 1px solid var(--border-color);
      background: #111111; color: var(--text-main); font-size: 13px;
    }
    textarea { resize: vertical; min-height: 50px; }
    .row { display: flex; flex-wrap: wrap; gap: 10px; }
    .col-50 { flex: 1 1 48%; }
    .col-33 { flex: 1 1 32%; }
    .btn {
      padding: 8px 12px; border-radius: 4px;
      border: none; cursor: pointer;
      font-size: 13px; font-weight: bold;
      margin-top: 8px;
    }
    .btn-primary { background: var(--accent-pink); color: #000; }
    .btn-secondary { background: #333333; color: var(--text-main); }
    .btn-danger { background: var(--danger); color: #fff; }
    .btn-small { padding: 4px 8px; font-size: 11px; }
    table {
      width: 100%; border-collapse: collapse;
      font-size: 12px; margin-top: 8px;
    }
    th, td {
      border: 1px solid var(--border-color);
      padding: 5px; text-align: left;
    }
    th { background: #151515; color: var(--accent-pink-soft); }
    .tag {
      display: inline-block; padding: 2px 6px;
      border-radius: 10px; font-size: 10px;
      margin-right: 4px;
    }
    .tag-low { background: #3b0000; color: var(--danger); }
    .tag-hot { background: #002b12; color: var(--success); }
    .muted { color: var(--text-muted); font-size: 11px; }
    .stat-grid { display: flex; flex-wrap: wrap; gap: 10px; }
    .stat-card {
      flex: 1 1 24%; background: #111111;
      border-radius: 6px; padding: 8px;
      border: 1px solid var(--border-color);
      font-size: 12px;
    }
    .stat-label { color: var(--text-muted); font-size: 11px; }
    .stat-value { font-size: 16px; font-weight: bold; margin-top: 4px; }
    .stat-positive { color: var(--success); }
    .stat-negative { color: var(--danger); }
    .pill {
      display: inline-block; padding: 2px 8px;
      border-radius: 999px; font-size: 11px;
      border: 1px solid var(--border-color);
      margin-right: 4px; margin-bottom: 4px;
    }
    .pill-active {
      background: var(--accent-pink);
      color: #000; border-color: var(--accent-pink);
    }
    .login-overlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.9);
      display: flex; align-items: center; justify-content: center;
      z-index: 999;
    }
    .login-box {
      background: #111111; padding: 20px;
      border-radius: 8px; width: 320px;
      border: 1px solid var(--accent-pink-soft);
      text-align: center;
    }
    .login-box h2 { margin-top: 0; color: var(--accent-pink-soft); }
    .login-box p { font-size: 12px; color: var(--text-muted); }
    @media (max-width: 800px) {
      .container { flex-direction: column; }
      .sidebar { width: 100%; display: flex; overflow-x: auto; }
      .sidebar h3 { display: none; }
      .nav-btn { flex: 1 1 auto; white-space: nowrap; }
    }
  </style>
</head>
<body>
  <div class="login-overlay" id="loginOverlay">
    <div class="login-box">
      <h2 data-key="login_title"></h2>
      <p data-key="login_subtitle"></p>
      <label data-key="login_username_label"></label>
      <input type="text" id="loginUser" placeholder="admin" />
      <label data-key="login_password_label"></label>
      <input type="password" id="loginPass" placeholder="1234" />
      <button class="btn btn-primary" style="width:100%;margin-top:12px;" id="loginBtn" data-key="login_button"></button>
      <p class="muted" style="margin-top:10px;" data-key="login_hint"></p>
    </div>
  </div>

  <header>
    <div class="logo">
      <div class="logo-circle">H</div>
      <div class="logo-text">
        <span class="logo-text-main" data-key="app_title"></span>
        <span class="logo-text-sub" data-key="app_subtitle"></span>
      </div>
    </div>
    <div class="header-right">
      <span id="headerUser"></span>
      <span id="headerDate"></span>
      <div class="lang-toggle">
        <button id="btnLangEN">EN</button>
        <button id="btnLangUR">UR</button>
      </div>
    </div>
  </header>

  <div class="container">
    <aside class="sidebar">
      <h3 data-key="menu_title"></h3>
      <button class="nav-btn active" data-view="dashboardView">
        <span data-key="menu_dashboard"></span> <span class="badge" data-key="menu_dashboard_badge"></span>
      </button>
      <button class="nav-btn" data-view="inventoryView">
        <span data-key="menu_inventory"></span> <span class="badge" data-key="menu_inventory_badge"></span>
      </button>
      <button class="nav-btn" data-view="salesView">
        <span data-key="menu_sales"></span> <span class="badge" data-key="menu_sales_badge"></span>
      </button>
      <button class="nav-btn" data-view="expensesView">
        <span data-key="menu_expenses"></span> <span class="badge" data-key="menu_expenses_badge"></span>
      </button>
      <button class="nav-btn" data-view="invoicesView">
        <span data-key="menu_invoices"></span> <span class="badge" data-key="menu_invoices_badge"></span>
      </button>
      <button class="nav-btn" data-view="settingsView">
        <span data-key="menu_settings"></span> <span class="badge" data-key="menu_settings_badge"></span>
      </button>
    </aside>

    <main class="main">
      <section id="dashboardView" class="card">
        <h2 data-key="dashboard_title"></h2>
        <div class="row">
          <div class="col-50">
            <div class="stat-grid">
              <div class="stat-card">
                <div class="stat-label" data-key="stat_today_sales_label"></div>
                <div class="stat-value" id="statTodaySales">0.00</div>
              </div>
              <div class="stat-card">
                <div class="stat-label" data-key="stat_week_sales_label"></div>
                <div class="stat-value" id="statWeekSales">0.00</div>
              </div>
              <div class="stat-card">
                <div class="stat-label" data-key="stat_month_sales_label"></div>
                <div class="stat-value" id="statMonthSales">0.00</div>
              </div>
              <div class="stat-card">
                <div class="stat-label" data-key="stat_profit_label"></div>
                <div class="stat-value" id="statProfit">0.00</div>
              </div>
            </div>
          </div>
          <div class="col-50">
            <h3 data-key="dashboard_quick_title"></h3>
            <p class="muted" data-key="dashboard_quick_text"></p>
            <div>
              <span class="pill" id="countProducts"></span>
              <span class="pill" id="countLowStock"></span>
              <span class="pill" id="countHotSale"></span>
              <span class="pill" id="countInvoices"></span>
            </div>
          </div>
        </div>

        <h3 style="margin-top:15px;" data-key="dashboard_stock_title"></h3>
        <table id="dashboardStockTable">
          <thead>
            <tr>
              <th data-key="tbl_code"></th>
              <th data-key="tbl_name"></th>
              <th data-key="tbl_category"></th>
              <th data-key="tbl_stock"></th>
              <th data-key="tbl_tags"></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section id="inventoryView" class="card" style="display:none;">
        <h2 data-key="inventory_title"></h2>
        <div class="row">
          <div class="col-50">
            <h3 data-key="inventory_add_title"></h3>
            <label data-key="inventory_code_label"></label>
            <input type="text" id="invCode" />
            <label data-key="inventory_name_label"></label>
            <input type="text" id="invName" />
            <label data-key="inventory_category_label"></label>
            <select id="invCategory">
              <option value="Cosmetics" data-key="cat_cosmetics"></option>
              <option value="Jewelry" data-key="cat_jewelry"></option>
              <option value="Undergarments" data-key="cat_undergarments"></option>
            </select>
            <div class="row">
              <div class="col-50">
                <label data-key="inventory_stock_label"></label>
                <input type="number" id="invStock" min="0" value="0" />
              </div>
              <div class="col-50">
                <label data-key="inventory_lowstock_label"></label>
                <input type="number" id="invLowStock" min="0" value="5" />
              </div>
            </div>
            <div class="row">
              <div class="col-50">
                <label data-key="inventory_cost_label"></label>
                <input type="number" id="invCost" min="0" step="0.01" value="0" />
              </div>
              <div class="col-50">
                <label data-key="inventory_price_label"></label>
                <input type="number" id="invPrice" min="0" step="0.01" value="0" />
              </div>
            </div>
            <label>
              <input type="checkbox" id="invHotSale" />
              <span data-key="inventory_hotsale_label"></span>
            </label>
            <button class="btn btn-primary" id="btnSaveProduct" data-key="btn_save_product"></button>
            <button class="btn btn-secondary btn-small" id="btnClearProduct" data-key="btn_clear"></button>
            <p class="muted" data-key="inventory_tip"></p>
          </div>
          <div class="col-50">
            <h3 data-key="inventory_list_title"></h3>
            <div class="row">
              <div class="col-50">
                <label data-key="inventory_search_label"></label>
                <input type="text" id="invSearch" />
              </div>
              <div class="col-50">
                <label data-key="inventory_filter_label"></label>
                <select id="invFilterCategory">
                  <option value="" data-key="filter_all"></option>
                  <option value="Cosmetics" data-key="cat_cosmetics"></option>
                  <option value="Jewelry" data-key="cat_jewelry"></option>
                  <option value="Undergarments" data-key="cat_undergarments"></option>
                </select>
              </div>
            </div>
            <table id="invTable">
              <thead>
                <tr>
                  <th data-key="tbl_code"></th>
                  <th data-key="tbl_name"></th>
                  <th data-key="tbl_category_short"></th>
                  <th data-key="tbl_stock"></th>
                  <th data-key="tbl_price"></th>
                  <th data-key="tbl_tags"></th>
                  <th data-key="tbl_action"></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <section id="salesView" class="card" style="display:none;">
        <h2 data-key="sales_title"></h2>
        <div class="row">
          <div class="col-50">
            <h3 data-key="sales_add_title"></h3>
            <label data-key="sales_search_label"></label>
            <input type="text" id="posSearch" />
            <table id="posSearchTable">
              <thead>
                <tr>
                  <th data-key="tbl_code"></th>
                  <th data-key="tbl_name"></th>
                  <th data-key="tbl_category_short"></th>
                  <th data-key="tbl_stock"></th>
                  <th data-key="tbl_price"></th>
                  <th data-key="tbl_add"></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="col-50">
            <h3 data-key="sales_cart_title"></h3>
            <table id="cartTable">
              <thead>
                <tr>
                  <th data-key="tbl_item"></th>
                  <th data-key="tbl_qty"></th>
                  <th data-key="tbl_price"></th>
                  <th data-key="tbl_total"></th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div style="margin-top:8px;">
              <span class="pill" id="cartItemsCount"></span>
              <span class="pill" id="cartTotalAmount"></span>
            </div>
            <label data-key="sales_customer_label"></label>
            <input type="text" id="cartCustomerName" />
            <label data-key="sales_notes_label"></label>
            <textarea id="cartNotes"></textarea>
            <button class="btn btn-primary" id="btnCheckout" data-key="btn_checkout"></button>
            <button class="btn btn-secondary btn-small" id="btnClearCart" data-key="btn_clear_cart"></button>
          </div>
        </div>
      </section>

      <section id="expensesView" class="card" style="display:none;">
        <h2 data-key="expenses_title"></h2>
        <div class="row">
          <div class="col-50">
            <h3 data-key="expenses_add_title"></h3>
            <label data-key="expenses_title_label"></label>
            <input type="text" id="expTitle" />
            <label data-key="expenses_amount_label"></label>
            <input type="number" id="expAmount" min="0" step="0.01" />
            <label data-key="expenses_date_label"></label>
            <input type="date" id="expDate" />
            <label data-key="expenses_note_label"></label>
            <textarea id="expNote"></textarea>
            <button class="btn btn-primary" id="btnAddExpense" data-key="btn_add_expense"></button>
          </div>
          <div class="col-50">
            <h3 data-key="expenses_list_title"></h3>
            <table id="expTable">
              <thead>
                <tr>
                  <th data-key="tbl_date"></th>
                  <th data-key="tbl_title"></th>
                  <th data-key="tbl_amount"></th>
                  <th></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <p class="muted">
              <span data-key="expenses_total_label"></span>
              <span id="expTotal">0.00</span> AED
            </p>
          </div>
        </div>
      </section>

      <section id="invoicesView" class="card" style="display:none;">
        <h2 data-key="invoices_title"></h2>
        <div class="row">
          <div class="col-50">
            <h3 data-key="invoices_list_title"></h3>
            <label data-key="invoices_search_label"></label>
            <input type="text" id="invSearchInvoice" />
            <table id="invoiceTable">
              <thead>
                <tr>
                  <th data-key="tbl_invoice_no"></th>
                  <th data-key="tbl_date"></th>
                  <th data-key="tbl_customer"></th>
                  <th data-key="tbl_total"></th>
                  <th data-key="tbl_items"></th>
                  <th data-key="tbl_return"></th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div class="col-50">
            <h3 data-key="invoices_detail_title"></h3>
            <div id="invoiceDetail" class="muted" data-key="invoices_detail_placeholder"></div>
          </div>
        </div>
      </section>

      <section id="settingsView" class="card" style="display:none;">
        <h2 data-key="settings_title"></h2>
        <h3 data-key="settings_login_title"></h3>
        <label data-key="settings_user_label"></label>
        <input type="text" id="setUser" />
        <label data-key="settings_pass_label"></label>
        <input type="password" id="setPass" />
        <button class="btn btn-primary" id="btnSaveLogin" data-key="btn_save_login"></button>

        <h3 style="margin-top:15px;" data-key="settings_backup_title"></h3>
        <p class="muted" data-key="settings_backup_text"></p>
        <button class="btn btn-secondary btn-small" id="btnExportData" data-key="btn_export"></button>
        <button class="btn btn-danger btn-small" id="btnClearAllData" data-key="btn_clear_all"></button>
        <label data-key="settings_backup_label"></label>
        <textarea id="backupJson"></textarea>
        <button class="btn btn-primary btn-small" id="btnImportData" data-key="btn_import"></button>
      </section>
    </main>
  </div>

  <script>
    const langEN = {
      app_title: "Hoorian Cosmetics & Jewelry",
      app_subtitle: "beauty • shine • elegance",
      menu_title: "Menu",
      menu_dashboard: "Dashboard",
      menu_dashboard_badge: "Home",
      menu_inventory: "Inventory",
      menu_inventory_badge: "Stock",
      menu_sales: "Sales / POS",
      menu_sales_badge: "Cart",
      menu_expenses: "Expenses",
      menu_expenses_badge: "Cost",
      menu_invoices: "Invoices",
      menu_invoices_badge: "History",
      menu_settings: "Settings",
      menu_settings_badge: "Login",

      login_title: "Hoorian Cosmetics & Jewelry",
      login_subtitle: "Secure login for shop owner / staff.",
      login_username_label: "Username",
      login_password_label: "Password",
      login_button: "Login",
      login_hint: "Default login: admin / 1234 (local only).",

      dashboard_title: "Sales Dashboard",
      stat_today_sales_label: "Today Sales (AED)",
      stat_week_sales_label: "This Week Sales (AED)",
      stat_month_sales_label: "This Month Sales (AED)",
      stat_profit_label: "Total Profit (Sales - Expenses)",
      dashboard_quick_title: "Quick Overview",
      dashboard_quick_text:
        "• Low stock items and hot sale items are highlighted below.\n• All data is stored locally in this browser (localStorage).\n• Use Inventory tab to add products and manage stock in/out.\n• Use Sales / POS tab to create cart, checkout and invoices.",
      dashboard_stock_title: "Low Stock & Hot Sale Items",

      inventory_title: "Inventory & Stock",
      inventory_add_title: "Add / Edit Product",
      inventory_code_label: "QR / Code",
      inventory_name_label: "Product Name",
      inventory_category_label: "Category",
      inventory_stock_label: "Stock Quantity",
      inventory_lowstock_label: "Low Stock Level",
      inventory_cost_label: "Cost Price (AED)",
      inventory_price_label: "Selling Price (AED)",
      inventory_hotsale_label: "Mark as Hot Sale Item",
      btn_save_product: "Save / Update Product",
      btn_clear: "Clear",
      inventory_tip:
        "Tip: Use QR / Code field to scan or type product code quickly for search and sales.",
      inventory_list_title: "Inventory List",
      inventory_search_label: "Search by Name / Code",
      inventory_filter_label: "Filter Category",

      cat_cosmetics: "Cosmetics",
      cat_jewelry: "Jewelry",
      cat_undergarments: "Undergarments",
      filter_all: "All",

      sales_title: "Sales / POS",
      sales_add_title: "Add to Cart",
      sales_search_label: "Search Product (Name / Code)",
      sales_cart_title: "Cart",
      sales_customer_label: "Customer Name (optional)",
      sales_notes_label: "Notes (optional)",
      btn_checkout: "Checkout & Create Invoice",
      btn_clear_cart: "Clear Cart",

      expenses_title: "Shop Expenses",
      expenses_add_title: "Add Expense",
      expenses_title_label: "Title",
      expenses_amount_label: "Amount (AED)",
      expenses_date_label: "Date",
      expenses_note_label: "Note",
      btn_add_expense: "Add Expense",
      expenses_list_title: "Expense List",
      expenses_total_label: "Total Expenses:",

      invoices_title: "Invoices & Returns",
      invoices_list_title: "Invoice List",
      invoices_search_label: "Search by Invoice / Customer",
      invoices_detail_title: "Invoice Detail",
      invoices_detail_placeholder: "Select an invoice to view details.",

      settings_title: "Settings & Backup",
      settings_login_title: "Login Settings",
      settings_user_label: "Change Username",
      settings_pass_label: "Change Password",
      btn_save_login: "Save Login",
      settings_backup_title: "Data Backup (Manual)",
      settings_backup_text:
        "You can copy JSON data below and save it somewhere safe. Later you can paste it back to restore.",
      btn_export: "Export Data",
      btn_clear_all: "Clear All Data",
      settings_backup_label: "Backup / Restore JSON",
      btn_import: "Import Data",

      tbl_code: "Code",
      tbl_name: "Name",
      tbl_category: "Category",
      tbl_category_short: "Cat",
      tbl_stock: "Stock",
      tbl_price: "Price",
      tbl_tags: "Tags",
      tbl_action: "Action",
      tbl_add: "Add",
      tbl_item: "Item",
      tbl_qty: "Qty",
      tbl_total: "Total",
      tbl_date: "Date",
      tbl_title: "Title",
      tbl_amount: "Amount",
      tbl_invoice_no: "No.",
      tbl_customer: "Customer",
      tbl_items: "Items",
      tbl_return: "Return"
    };

    const langUR = {
      app_title: "Hoorian Cosmetics & Jewelry",
      app_subtitle: "beauty • shine • elegance",
      menu_title: "Menu",
      menu_dashboard: "Dashboard",
      menu_dashboard_badge: "Home",
      menu_inventory: "Inventory (Saman)",
      menu_inventory_badge: "Stock",
      menu_sales: "Sales / POS (Sale)",
      menu_sales_badge: "Cart",
      menu_expenses: "Kharchay",
      menu_expenses_badge: "Cost",
      menu_invoices: "Invoices (Bills)",
      menu_invoices_badge: "History",
      menu_settings: "Settings",
      menu_settings_badge: "Login",

      login_title: "Hoorian Cosmetics & Jewelry",
      login_subtitle: "Shop owner / staff ka secure login.",
      login_username_label: "Username (Naam)",
      login_password_label: "Password",
      login_button: "Login",
      login_hint: "Default login: admin / 1234 (sirf is device par).",

      dashboard_title: "Sales Dashboard (Sales ka Jayeza)",
      stat_today_sales_label: "Aaj ki Sales (AED)",
      stat_week_sales_label: "Is Week ki Sales (AED)",
      stat_month_sales_label: "Is Month ki Sales (AED)",
      stat_profit_label: "Total Profit (Sales - Kharchay)",
      dashboard_quick_title: "Quick Overview (Mukhtasar Jayeza)",
      dashboard_quick_text:
        "• Low stock aur hot sale items neeche highlight honge.\n• Saara data sirf is browser mein localStorage mein save hota hai.\n• Inventory tab se products add karein aur stock manage karein.\n• Sales / POS tab se cart banayein, checkout karein aur invoice banayein.",
      dashboard_stock_title: "Low Stock & Hot Sale Items",

      inventory_title: "Inventory & Stock (Saman ka Record)",
      inventory_add_title: "Product Add / Edit Karein",
      inventory_code_label: "QR / Code (Number)",
      inventory_name_label: "Product Ka Naam",
      inventory_category_label: "Category (Qism)",
      inventory_stock_label: "Stock Quantity (Kitna Saman)",
      inventory_lowstock_label: "Low Stock Level (Kam Stock Limit)",
      inventory_cost_label: "Cost Price (AED) (Khareed Rate)",
      inventory_price_label: "Selling Price (AED) (Sale Rate)",
      inventory_hotsale_label: "Isay Hot Sale Item mark karein",
      btn_save_product: "Product Save / Update Karein",
      btn_clear: "Clear (Saaf)",
      inventory_tip:
        "Tip: QR / Code field mein code type ya scan karein, search aur sale dono asaan ho jayein ge.",
      inventory_list_title: "Inventory List (Products ki List)",
      inventory_search_label: "Name / Code se Search karein",
      inventory_filter_label: "Category Filter",

      cat_cosmetics: "Cosmetics",
      cat_jewelry: "Jewelry",
      cat_undergarments: "Undergarments",
      filter_all: "Sab",

      sales_title: "Sales / POS (Sale System)",
      sales_add_title: "Cart mein Item Add Karein",
      sales_search_label: "Product Search (Name / Code)",
      sales_cart_title: "Cart (Jo Bechna hai)",
      sales_customer_label: "Customer Name (optional)",
      sales_notes_label: "Note (agar kuch likhna ho)",
      btn_checkout: "Checkout & Invoice Banayein",
      btn_clear_cart: "Cart Clear Karein",

      expenses_title: "Shop Kharchay",
      expenses_add_title: "Naya Kharcha Add Karein",
      expenses_title_label: "Title (Jaise Rent, Salary)",
      expenses_amount_label: "Amount (AED)",
      expenses_date_label: "Date (Tareekh)",
      expenses_note_label: "Note (Zaroori ho to)",
      btn_add_expense: "Kharcha Add Karein",
      expenses_list_title: "Kharchon ki List",
      expenses_total_label: "Total Kharchay:",

      invoices_title: "Invoices & Returns (Bills aur Wapsi)",
      invoices_list_title: "Invoices ki List",
      invoices_search_label: "Invoice / Customer se Search karein",
      invoices_detail_title: "Invoice Detail",
      invoices_detail_placeholder: "Detail dekhne ke liye koi invoice select karein.",

      settings_title: "Settings & Backup",
      settings_login_title: "Login Settings",
      settings_user_label: "Username change karein",
      settings_pass_label: "Password change karein",
      btn_save_login: "Login Save Karein",
      settings_backup_title: "Data Backup (Manual)",
      settings_backup_text:
        "Neeche JSON data copy karke safe jagah par save karein. Baad mein paste karke restore kar sakte hain.",
      btn_export: "Data Export Karein",
      btn_clear_all: "Saara Data Clear Karein",
      settings_backup_label: "Backup / Restore JSON",
      btn_import: "Data Import Karein",

      tbl_code: "Code",
      tbl_name: "Naam",
      tbl_category: "Category",
      tbl_category_short: "Cat",
      tbl_stock: "Stock",
      tbl_price: "Price",
      tbl_tags: "Tags",
      tbl_action: "Action",
      tbl_add: "Add",
      tbl_item: "Item",
      tbl_qty: "Qty",
      tbl_total: "Total",
      tbl_date: "Date",
      tbl_title: "Title",
      tbl_amount: "Amount",
      tbl_invoice_no: "No.",
      tbl_customer: "Customer",
      tbl_items: "Items",
      tbl_return: "Return"
    };

    const KEY_LANG = "hoorian_lang";

    function applyLanguage(lang) {
      const dict = lang === "UR" ? langUR : langEN;
      document.querySelectorAll("[data-key]").forEach(el => {
        const key = el.getAttribute("data-key");
        if (dict[key] !== undefined) {
          el.textContent = dict[key];
        }
      });
      const headerUser = document.getElementById("headerUser");
      if (headerUser && window.currentUser) {
        headerUser.textContent = "User: " + window.currentUser;
      }
      document.getElementById("btnLangEN").classList.toggle("active", lang === "EN");
      document.getElementById("btnLangUR").classList.toggle("active", lang === "UR");
      localStorage.setItem(KEY_LANG, lang);
    }

    const KEY_PRODUCTS = 'hoorian_products';
    const KEY_INVOICES = 'hoorian_invoices';
    const KEY_EXPENSES = 'hoorian_expenses';
    const KEY_LOGIN = 'hoorian_login';

    let products = [];
    let invoices = [];
    let expenses = [];
    let cart = [];
    window.currentUser = null;

    function loadData() {
      products = JSON.parse(localStorage.getItem(KEY_PRODUCTS) || '[]');
      invoices = JSON.parse(localStorage.getItem(KEY_INVOICES) || '[]');
      expenses = JSON.parse(localStorage.getItem(KEY_EXPENSES) || '[]');
      const login = JSON.parse(localStorage.getItem(KEY_LOGIN) || 'null');
      if (!login) {
        localStorage.setItem(
          KEY_LOGIN,
          JSON.stringify({ username: 'admin', password: '1234' })
        );
      }
    }
    function saveProducts() { localStorage.setItem(KEY_PRODUCTS, JSON.stringify(products)); }
    function saveInvoices() { localStorage.setItem(KEY_INVOICES, JSON.stringify(invoices)); }
    function saveExpenses() { localStorage.setItem(KEY_EXPENSES, JSON.stringify(expenses)); }

    function formatDate(d) {
      const dt = new Date(d);
      if (isNaN(dt)) return '';
      return dt.toISOString().slice(0, 10);
    }
    function todayStr() { return new Date().toISOString().slice(0, 10); }
    function sameDay(d1, d2) { return formatDate(d1) === formatDate(d2); }
    function weekOfYear(date) {
      const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
      const dayNum = d.getUTCDay() || 7;
      d.setUTCDate(d.getUTCDate() + 4 - dayNum);
      const yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
      return Math.ceil((((d - yearStart) / 86400000) + 1)/7);
    }
    function monthKey(date) { return date.getFullYear() + '-' + (date.getMonth() + 1); }
    function generateInvoiceNumber() {
      const base = 'INV';
      const num = invoices.length + 1;
      return base + String(num).padStart(4, '0');
    }
    function updateHeaderDate() {
      const el = document.getElementById('headerDate');
      const now = new Date();
      el.textContent = now.toLocaleString();
    }
    setInterval(updateHeaderDate, 60000);

    const loginOverlay = document.getElementById('loginOverlay');
    const loginBtn = document.getElementById('loginBtn');
    loginBtn.addEventListener('click', () => {
      const u = document.getElementById('loginUser').value.trim() || 'admin';
      const p = document.getElementById('loginPass').value.trim() || '1234';
      const
